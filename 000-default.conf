<VirtualHost *:80>

	ServerAdmin webmaster@localhost
	DocumentRoot /var/www/html

	<Directory /var/www/html>
   	  Options +FollowSymLinks
   	  AllowOverride all
	</Directory>

LogFormat "{ \
      \"host\":\"${VIRTUAL_HOST}\", \
      \"path\":\"/var/log/httpd/logstash_access_log\", \
      \"tags\":[\"apache\",\"${VIRTUAL_HOST}\"], \
      \"message\": \"%h %l %u %t \\\"%r\\\" %>s %b\", \
      \"timestamp\": \"%{%Y-%m-%dT%H:%M:%S%z}t\", \
      \"useragent\": \"%{User-agent}i\", \
      \"clientip\": \"%{X-Forwarded-For}i\", \
      \"duration\": %D, \
      \"status\": %s, \
      \"request\": \"%U%q\", \
      \"urlpath\": \"%U\", \
      \"urlquery\": \"%q\", \
      \"method\": \"%m\", \
      \"bytes\": %B, \
      \"vhost\": \"%v\" \
    }" logstash_apache_json

	CustomLog "|/usr/bin/logger -thttpd -plocal7.info" logstash_apache_json


	ErrorLogFormat "{ \
      \"host\":\"${VIRTUAL_HOST}\", \
      \"path\":\"/var/log/httpd/logstash_access_log\", \
      \"tags\":[\"apache\",\"error\",\"${VIRTUAL_HOST}\"], \
      \"message\": \"%M\", \
      \"timestamp\": \"%{%Y-%m-%dT%H:%M:%S%z}t\", \
      \"vhost\": \"%v\" \
      }" 
	ErrorLog "|/usr/bin/logger -thttpd -plocal7.info" 

</VirtualHost>

# vim: syntax=apache ts=4 sw=4 sts=4 sr noet
